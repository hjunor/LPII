<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />

    <title>Document</title>
  </head>    
  <body>

    <section
      style="
        display: flex;
        justify-content: center;
        flex-direction: column;
        align-items: center;
      "
    >
      <h2>CADASTRO DE PRODUTOS</h2>
      <form  id="form"
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          flex-direction: column;
        "
      >
        <label>Id: <input type="text" name="id" /> </label>
       <br />
        <label>Nome: <input type="text" name="name" /></label>
        <br />
        <label>Valor: <input type="text" name="value" /></label>
         <br />

        <button
          type="submit"
        >
          cadastrar
        </button>
       </form>
        <button type="button" value="listar" onclick="mostrarTodos()">
          Produtos cadastrados
        </button>
        <p id="resultado"></p>
     
    </section>

    <script>
      var products = [];

      const form = document.getElementById("form");

      form.addEventListener("submit", handleSubmit);

      function handleSubmit(event) {
        event.preventDefault()

        let formData = new FormData(event.target);
        let data = Object.fromEntries(formData);
        let { name, id, value } = data;
        var product = {
          name,
          id,
          value,
        };

        console.log({ name, id, value })

        products.push(product);
        document.getElementById("resultado").innerHTML =
          name + " cadastrado com sucesso!";
      }

      function mostrarTodos() {
        texto = "<table border=1>";
        texto += "<tr>    <th>Id</th>    <th>Nome</th>   <th>Valor</th> ";
        for (var i = 0; i < products.length; i++) {
          texto += "<tr>";
          texto +=
            "<td>" +
            products[i].id +
            "</td><td>" +
            products[i].name +
            "</td><td>R$" +
            products[i].value +
            "</td>";
          texto += "</tr>";
        }
        texto += "</table>";
        document.getElementById("resultado").innerHTML = texto;
      }
    </script>
  </body>
</html>
